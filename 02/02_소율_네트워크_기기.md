# 네트워크 기기

계층별로 처리범위 나눔. 상위 계층 처리 기기는 하위계층을 처리 가능 반대는 불가

## 1️⃣ 애플리케이션 계층

- **L7 스위치 (로드밸런서)**
    - **역할** : 응용계층 정보를 기반으로 트래픽을 분산·필터링
    - **특징**
        - 서버 부하 분산 기기
        - 목표는 처리할 수 있는 트래픽 증가
        - **포트,IP,URL, 서버, 캐시, 쿠키,HTTP 헤더 등을** 기반으로 로드밸런싱
        - **불필요한 데이터 필터링** 기능
        - 애플리케이션 수준의 **트래픽 모니터링**
        - **헬스체크**로 장애 서버를 분산 대상에서 제외
        - AWS ALB(Application Load Balancer)에 해당
    - **비교**
        - **L4 스위치**: 전송계층(IP/포트 기반)까지만 인식
        - **L7 스위치**: 애플리케이션 계층(메시지 기반)까지 인식
        - 둘다 로드밸런서

✅ 스위치 : 여러 장비 연결하고 데이터 통신을 중재, 목적지가 연결된 포트로만 전기 신호 보내어 데이터 전송

✅ 헬스체크 : 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 다양한 방법으로 서버에 요청을 보냄. 서버에 부하가 되지 않을 만큼 요청 횟수 설정

✅ 로드밸런서의 기능인 서버 이중화 : 2대 이상 서버 기반으로 가상 IP를 제공하고 안정적인 서비스 제공

---

## 2️⃣ 전송 계층 = **방화벽 · L4 스위치**

- **방화벽(Firewall)**
    - 패킷의 **IP 주소/포트 번호 기반**으로 허용/차단
- **L4 스위치 (Transport Layer Load Balancer)**
    - **IP + Port 기반** 트래픽 분산
    - FTP, HTTP 등 프로토콜별 스위칭 가능
    - 세션 레벨까지만 인식 → **정교한 애플리케이션 레벨 분산 불가**
    - 스트리밍 서비스에서 사용 불가
    - 메시지를 기반으로 인식 불가
    - AWS NLB(Network Load Balancer)에 해당

---

## 3️⃣ 인터넷 계층

- **라우터(Router)**
    - 역할 : 여러 네트워크를 연결, 분할, 구분
    - 다른 네트워크에 존재하는 장치끼리 최적의 경로로 패킷 소모 최소화 하여 패킷 포워딩하는 라우팅장비
    - 가정의 네트워크와 외부 인터넷 연결 짓는 역할
    - **라우팅 테이블 기반 경로 선택**
    - 기능
        - **라우팅 프로토콜(OSPF, BGP)** : 라우터끼리 정보 교환하여 라우팅 테이블을 동적으로 만드는 프로토콜
        - **NAT**: 사설 ↔ 공인 IP 변환
        - **DHCP**: IP주소 등 네트워크 설정 자동 할당
- **게이트웨이(Gateway)**
    - 서로 다른 프로토콜/네트워크 간 연결
    - LAN에서 다른 네트워크에 데이터를 보내거나 다른 네트워크로 부터 받는 출입구 역할
- **L3 스위치(하드웨어 기반 라우팅 담당 라우터)**
    - L2(스위치 기능) + 라우팅(IP 기반)
    - **하드웨어 기반 라우팅**(FPGA/ASIC) : MAC주소 테이블과 라우팅 테이블을 조합한 정보를 전송처리 전용 하드웨어에 기록
    - 여러 포트 존재하여 여러 단말 연결 가능
    - IP패킷 라우팅 가능
    - 비교

        |  | 참조 테이블 | 참조 PDU | 참조 주소 |
        | --- | --- | --- | --- |
        | L3 스위치 | 라우팅테이블 | IP패킷 | IP주소 |
        | L2 스위치 | MAC주소 테이블 | 이더넷 프레임 | MAC주소 |

---

## 4️⃣ 링크 계층 (데이터링크 + 물리)

### 🔹 데이터링크 계층

- **L2 스위치**
    - **MAC 주소 기반 스위칭**
    - MAC주소 테이블로 주소 관리
    - 연결된 장치로부터 패킷이 왔을 때 패킷 전송 담당
    - IP주소 기반 라우팅 불가
    - 주소테이블에 목적지 MAC 없으면 브로드캐스트(전체포트에 전달)
    - 주소테이블은 일정 시간 지나면 삭제
    - 동작 방식
        - **Store & Forward**: 프레임 전체 수신 후 전송 (안정적, 지연↑)
        - **Cut Through**: 목적지 MAC 확인 후 즉시 전송 (빠름, 오류 검출 한계)
        - **Fragment Free**: 처음 64바이트 읽어 에러 처리 후 전송 (절충안)
- **브리지(Bridge)**
    - 두 LAN 연결, 범위 확장
    - 포트와 포트 사이 다리 역할
    - MAC주소를 MAC주소테이블로 관리
    - 목적 : 통신망 범위 확장, 서로 다른 LAN으로 이루어진 하나의 통신망 구축

---

### 🔹 물리 계층

- **허브(Hub)**
    - 여러 컴퓨터를 연결하여 네트워크로 보내거나 하나의 네크워크로 수신된 정보를 여러 컴퓨터로 송신위한 장비 (모든 포트로 브로드캐스트)
    - 스위치와 달리 목적지 구분 없음 → **충돌 多, 비효율적**
- **리피터(Repeater)**
    - 약해진 신호를 증폭해 전송 거리 확장
    - 광케이블 보급으로 사용 줄어듦
- **AP(Access Point)**
    - AP에 유선 LAN연결 후 다른 장치의 무선 LAN기술을 사용하여 무선 네트워크 연결
    - 무선 LAN 환경 제공(Wi-Fi)
- **NIC(Network Interface Card, LAN 카드)**
    - 컴퓨터 ↔ 네트워크 인터페이스 장치
    - 2대 이상 컴퓨터 네트워크 구성하는데 사용
    - 네트워크와 빠른 속도로 데이터 송수신할 수 있도록 컴퓨터 내 설치하는 확장카드
    - 고유 식별 번호 = **MAC 주소**